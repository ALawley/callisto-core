language: python
python:
    - "3.4"
sudo: false
cache:
    directories:
        - $TRAVIS_BUILD_DIR/.tox
services:
    - postgresql
env:
    - TOXENV=py27 db_user=postgres
    - TOXENV=py33 db_user=postgres
    - TOXENV=py34 db_user=postgres
    - TOXENV=py35 db_user=postgres
install:
    - pip install pyflakes tox
script:
    - pyflakes setup.py runtests.py tests callisto
    - tox
before_cache:
    - rm -r $TRAVIS_BUILD_DIR/.tox/log $TRAVIS_BUILD_DIR/.tox/dist $TRAVIS_BUILD_DIR/.tox/*/log $TRAVIS_BUILD_DIR/.tox/*/lib/python*/site-packages/callisto*
